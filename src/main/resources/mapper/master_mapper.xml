<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- dumy_mapper.xml -->



<!-- MESSAGE -->
<mapper namespace="co.cod.app.master.mapper.MasterMapper">
	<select id="masterMessage" resultType="vofile.MessageVO"> 
	SELECT * FROM MESSAGE
	WHERE SEND_RECEIVE =1
	</select>	

	<select id="getMasterMessageCount" parameterType="vofile.MessageVO" resultType="int">
		SELECT NVL(COUNT(MASTER_READ),0) FROM MESSAGE
		WHERE MASTER_READ=1
	</select>
	
	<select id="getMasterMessage" resultType="vofile.MasterVO" parameterType="vofile.MasterVO">
		SELECT
			MESSAGE_TITLE, 
			MESSAGE_CONTENT, 
			READ 
		  FROM MESSAGE WHERE MESSAGE_SEQ =#{messageSeq}
	</select>
	
	<update id="updateMessage" parameterType="int">  <!-- 메세지 읽음, 읽지않음 -->
		UPDATE MESSAGE
		SET
		MASTER_READ=0
		WHERE MESSAGE_SEQ=#{messageSeq}
	</update>


<!--  마스터가 Admin 이 보낸 카페 등록 폼에서 승인을 누를시 cafe_state 가 0에서 2로 바꿈  -->
</mapper>
